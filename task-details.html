<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Instructions - EarnCash</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #0066ff; --bg: #f4f7fe; --white: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); padding: 20px; padding-bottom: 50px; }

        .back-nav { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; text-decoration: none; color: #333; font-weight: 700; }
        
        .task-card { background: var(--white); border-radius: 30px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        
        .task-header { text-align: center; margin-bottom: 25px; }
        .task-icon { width: 70px; height: 70px; border-radius: 20px; margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .task-name { font-size: 22px; font-weight: 800; }
        .reward-badge { display: inline-block; background: #e8f5e9; color: #2e7d32; padding: 6px 15px; border-radius: 10px; font-size: 14px; font-weight: 700; margin-top: 8px; }

        .instruction-box { margin-bottom: 25px; }
        .instruction-box h3 { font-size: 16px; margin-bottom: 15px; color: #555; }
        .step { display: flex; gap: 12px; margin-bottom: 15px; align-items: flex-start; }
        .step-num { background: var(--primary); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; flex-shrink: 0; font-weight: 700; }
        .step-text { font-size: 14px; color: #444; line-height: 1.5; font-weight: 500; }

        .action-link { display: block; width: 100%; background: var(--primary); color: white; text-align: center; text-decoration: none; padding: 16px; border-radius: 15px; font-weight: 800; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(0,102,255,0.2); }

        /* Screenshot Upload Area */
        .upload-area { border: 2px dashed #cbd5e0; padding: 25px; border-radius: 20px; text-align: center; background: #f8fafc; cursor: pointer; transition: 0.3s; }
        .upload-area:hover { border-color: var(--primary); background: #f0f7ff; }
        .upload-icon { font-size: 30px; color: #a0aec0; margin-bottom: 10px; }
        #preview { width: 100%; border-radius: 15px; margin-top: 15px; display: none; border: 1px solid #eee; }

        .submit-btn { width: 100%; background: #1a1a1a; color: white; border: none; padding: 18px; border-radius: 15px; font-weight: 800; font-size: 16px; margin-top: 20px; cursor: pointer; transition: 0.3s; }
        .submit-btn:disabled { background: #ccc; cursor: not-allowed; }

        .help-link { display: block; text-align: center; margin-top: 20px; color: #25d366; text-decoration: none; font-weight: 700; font-size: 14px; }
    </style>
</head>
<body>

    <a href="home.html" class="back-nav">
        <i class="fa-solid fa-arrow-left"></i> Back to Tasks
    </a>

    <div class="task-card">
        <div class="task-header">
            <img id="tIcon" src="" class="task-icon">
            <h2 id="tName" class="task-name">Loading...</h2>
            <div id="tReward" class="reward-badge">₹00</div>
        </div>

        <div class="instruction-box">
            <h3><i class="fa-solid fa-list-check"></i> Instructions:</h3>
            <div id="stepsList">
                </div>
        </div>

        <a id="tLink" href="#" target="_blank" class="action-link">Open Task Link <i class="fa-solid fa-external-link" style="font-size: 12px;"></i></a>

        <div class="upload-area" onclick="document.getElementById('fileIn').click()">
            <div class="upload-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
            <p id="uploadText" style="font-size: 14px; color: #718096; font-weight: 600;">Click to upload Screenshot</p>
            <input type="file" id="fileIn" accept="image/*" style="display: none;">
            <img id="preview">
        </div>

        <button id="finalSubmit" class="submit-btn" disabled>Submit Verification</button>
        
        <a href="https://wa.me/919999999999" class="help-link">
            <i class="fa-brands fa-whatsapp"></i> Need Help? Chat with us
        </a>
    </div>

    <script>
        // 1. Home page se data lena
        const params = new URLSearchParams(window.location.search);
        const dataRaw = params.get('data');

        if (dataRaw) {
            const task = JSON.parse(decodeURIComponent(dataRaw));
            
            // Details bharna
            document.getElementById('tName').innerText = task.name;
            document.getElementById('tReward').innerText = "Reward: " + task.reward;
            document.getElementById('tIcon').src = task.icon;
            document.getElementById('tLink').href = task.link;
            
            // Steps load karna (Dynamic)
            const stepsContainer = document.getElementById('stepsList');
            stepsContainer.innerHTML = task.steps.map((step, index) => `
                <div class="step">
                    <div class="step-num">${index + 1}</div>
                    <div class="step-text">${step}</div>
                </div>
            `).join('');
        }

        // 2. Screenshot Preview & Button Unlock
        const fileInput = document.getElementById('fileIn');
        const submitBtn = document.getElementById('finalSubmit');

        fileInput.onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const preview = document.getElementById('preview');
                    preview.src = event.target.result;
                    preview.style.display = 'block';
                    document.getElementById('uploadText').innerText = "Screenshot Selected ✅";
                    submitBtn.disabled = false; // Button unlock ho gaya
                    submitBtn.style.background = "#0066ff"; // Blue color jab ready ho
                };
                reader.readAsDataURL(file);
            }
        };

        // 3. Final Submit
        submitBtn.onclick = () => {
            alert("Verification Sent! Aapka task check kiya ja raha hai. 24 hours mein payment mil jayegi.");
            window.location.href = 'home.html';
        };
    </script>
</body>
</html>
